<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>新規登録</title>
  <link rel="stylesheet" href="style.css">
  <script>
    function validateForm() {
      const userId = document.getElementById("userId").value;
      const password = document.getElementById("password").value;
      const error = document.getElementById("errorMessage");
      error.textContent = "";

      const allowedChars = /^[a-zA-Z0-9!$%&'()*+,/;<=>?\[\]^{}~]{1,20}$/;
      if (!allowedChars.test(userId)) {
        error.textContent = "ユーザーIDは半角英数字と指定された記号のみ、20文字以内で入力してください。";
        return false;
      }

      if (password.length < 8 || password.length > 20) {
        error.textContent = "パスワードは8文字以上20文字以内で入力してください。";
        return false;
      }

      const hasUpper = /[A-Z]/.test(password);
      const hasLower = /[a-z]/.test(password);
      const hasDigit = /[0-9]/.test(password);
      const hasSymbol = /[!$%&'()*+,/;<=>?\[\]^{}~]/.test(password);

      const typesUsed = [hasUpper, hasLower, hasDigit, hasSymbol].filter(Boolean).length;

      if (typesUsed < 2) {
        error.textContent = "パスワードは大文字、小文字、数字、記号のうち2種類以上を含めてください。";
        return false;
      }

      // 通過した場合は true
      return true;
    }
  </script>
</head>
<body>
  <h1>新規登録</h1>
  <form onsubmit="return validateForm()">
    <label for="userId">ユーザーID:</label>
    <input type="text" id="userId" name="userId" maxlength="20" required><br><br>

    <label for="password">パスワード:</label>
    <input type="password" id="password" name="password" required><br><br>

    <button type="submit">登録</button>
  </form>
  <p id="errorMessage" style="color: red;"></p>
</body>
</html>
